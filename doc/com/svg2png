#! /usr/bin/env perl

use Getopt::Std;
use Cwd 'getcwd';
my $cur_dir = getcwd . '/';

%opts = ();

getopts ("ir", \%opts);

foreach $svgName (@ARGV) {
	next if $svgName !~ /.svg$/;
	$pngName = $svgName;
	$pngName =~ s/.svg$/.png/;

	if($opts{"i"} == 1) {
	    $com = "inkscape --export-area-drawing --export-dpi=144 --file=";
	    $com .= $cur_dir . $svgName;
	    $com .= " --export-png=";
	    $com .= $cur_dir . $pngName;
	} else {
	    $com = "convert -trim -density 600 -resize 1024x ";
	    $com .= $cur_dir . $svgName;
	    $com .= " ";
	    $com .= $cur_dir . $pngName;
	}
	if(!(-f $pngName)) {
		system($com);
	}	
}

0;

