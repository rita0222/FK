[概要]

FLTK Ver.1.3.0 からは、GUI 上での文字列データを全て UTF-8 で扱うようになりました。
これに伴い、日本語文字列をそのまま "" で囲って引数に渡すと文字化けします。
この問題への対処として、fk_Code::utf8()関数を用意しました。
FLTK で作成した GUI に日本語文字列を渡す際には、次のように記述してください。

    // 外側のウィンドウのタイトルバーに日本語を使う場合
    Fl_Window    mainWindow(512, 512, fk_Code::utf8("日本語", FK_STR_SJIS));

    // 第 2 引数で変換前の文字コードを指定しますが、
    // fk_Code::setInputCoding()で事前に設定すれば省略できます。
    fk_Code::setInputCoding(FK_STR_SJIS);

    // ダイアログに日本語文字列を出力したい場合
    fl_alert(fk_Code::utf8("日本語文字列"));

ソースファイルの冒頭で using namespace fk_Code; と宣言すれば、
fk_Code:: も省略できます。適宜利用すると良いでしょう。


[補足事項]

Visual Studio は、他のコンパイラと比べて文字列エンコードの扱いが独特です。
一般的なコンパイラでは "" で囲まれた文字列は、
ソースファイル自体の文字コードと同様に扱われます。

しかし、日本語版 Visual Studio の場合は
「"" で囲われた文字列は何が何でも Shift-JIS」として扱われます。
ソースファイル自体の文字コードや、コンパイラオプションを変更しても、
この扱いは変わりません。「L"日本語"」とすると UNICODE 形式になりますが、
Visual Studio がサポートするのは UTF-16 なので、FLTK には利用できません。

以上の点を踏まえた上で、文字列周りの処理を作成するようにしてください。
